# spring aop sample
利用 spring-aop 统一处理异常,实现前端异常统一返回,错误码以及分布式锁等功能

## 前台统一返回以及错误码
- 包: `c.s.sample.config.exception`
- 错误码,包: `c.s.sample.exception`

## 统一日志打印以及分布式锁
- 包: `c.s.sample.aspect`

## 场景模拟与设想实现
### 场景1
- 场景: 当某个动作(如启动虚拟机)完成之后,发送通知(如发送一封提醒邮件)
- 实现:  
  1. 在 serivce 层定义切面,由于事务都在 service 层完成,controller 层只是向前台返回数据,故而认为 service 层方法执行结束,事件完成
  2. 在要提醒的方法上添加自定义的注解(注解要声明一个字段:邮件类型,用于应用不同模板)
  3. 在 @After 或 @afterReturning 方法中进行邮件发送处理

### 场景2  
- 场景: 基于场景1,以动态的方式(如配置到数据中)实现
- 实现:  
  1. 如场景1的实现1
  2. 在 @After 或 @AfterReturning 方法中,从数据库中获取邮件配置(对应的动作方法类和名称,邮件模板)
  3. 通过 jointPoint,获取切点的类和方法名称,与数据库进行匹配
  4. 同时建议将发送邮件使用异步的方式操作